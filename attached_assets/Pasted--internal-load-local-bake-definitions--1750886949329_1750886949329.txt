 => [internal] load local bake definitions                                                                                                                                                                                       0.0s
 => [internal] load local bake definitions                                                                                                                                                                                       0.0s
 => => reading from stdin 342B                                                                                                                                                                                                   0.0s
 => [internal] load build definition from Dockerfile                                                                                                                                                                             0.0s
 => => transferring dockerfile: 1.23kB                                                                                                                                                                                           0.0s
 => [internal] load metadata for docker.io/library/node:20-alpine                                                                                                                                                                0.9s
 => [internal] load .dockerignore                                                                                                                                                                                                0.0s
 => => transferring context: 412B                                                                                                                                                                                                0.0s
 => [ 1/10] FROM docker.io/library/node:20-alpine@sha256:674181320f4f94582c6182eaa151bf92c6744d478be0f1d12db804b7d59b2d11                                                                                                        0.0s
 => [internal] load build context                                                                                                                                                                                                0.7s
 => => transferring context: 1.35MB                                                                                                                                                                                              0.7s
 => CACHED [ 2/10] WORKDIR /app                                                                                                                                                                                                  0.0s
 => [ 3/10] RUN addgroup -g 1001 -S nodejs                                                                                                                                                                                       0.4s
 => [ 4/10] RUN adduser -S ncrisis -u 1001                                                                                                                                                                                       0.3s
 => [ 5/10] COPY package*.json ./                                                                                                                                                                                                0.1s
 => [ 6/10] COPY tsconfig.json ./                                                                                                                                                                                                0.0s
 => [ 7/10] RUN npm ci --only=production || npm install --production                                                                                                                                                            22.1s
 => [ 8/10] COPY . .                                                                                                                                                                                                             1.9s
 => [ 9/10] RUN mkdir -p uploads tmp logs                                                                                                                                                                                        0.2s
 => [10/10] RUN chown -R ncrisis:nodejs /app                                                                                                                                                                                    83.0s
 => exporting to image                                                                                                                                                                                                          14.4s
 => => exporting layers                                                                                                                                                                                                         14.4s
 => => writing image sha256:e89b96200a99da4f5eeafc2b9ae30645dedf22c0f41b6cd02662a00aef72d046                                                                                                                                     0.0s
 => => naming to docker.io/library/ncrisis-app                                                                                                                                                                                   0.0s
 => resolving provenance for metadata file                                                                                                                                                                                       0.0s
[+] Building 1/1
 ‚úî app  Built                                                                                                                                                                                                                    0.0s 
[+] Running 1/3
 ‚úî Network ncrisis_default       Created                                                                                                                                                                                         0.1s 
[+] Running 1/3risis-redis-1     Creating                                                                                                                                                                                        0.0s ‚úî Network ncrisis_default       Created                                                                                                                                                                                         0.1s
 ‚†ã Container ncrisis-postgres-1  Creating                                                                                                                                                                                        0.0s[+] Running 2/4risis-redis-1     Creating                                                                                                                                                                                        0.1s
 ‚úî Network ncrisis_default       Created                                                                                                                                                                                         0.1s
 ‚†ô Container ncrisis-postgres-1  Creating                                                                                                                                                                                        0.1s ‚†π Container ncrisis-redis-1     Starting                                                                                                                                                                                        0.2s
[+] Running 2/4
 ‚úî Network ncrisis_default       Created                                                                                                                                                                                         0.1s 
 ‚†∏ Container ncrisis-redis-1     Starting                                                                                                                                                                                        0.3s[+] Running 2/4
 ‚úî Network ncrisis_default       Created                                                                                                                                                                                         0.1s 
 ‚†º Container ncrisis-redis-1     Starting                                                                                                                                                                                        0.4s[+] Running 3/4
 ‚úî Network ncrisis_default       Created                                                                                                                                                                                         0.1s 
 ‚úî Container ncrisis-redis-1     Started                                                                                                                                                                                         0.5s[+] Running 3/4
 ‚úî Network ncrisis_default       Created                                                                                                                                                                                         0.1s 
 ‚úî Container ncrisis-redis-1     Started                                                                                                                                                                                         0.5s[+] Running 3/4
 ‚úî Network ncrisis_default       Created                                                                                                                                                                                         0.1s 
 ‚úî Container ncrisis-redis-1     Started                                                                                                                                                                                         0.5s[+] Running 4/4
 ‚úî Network ncrisis_default       Created                                                                                                                                                                                         0.1s 
 ‚úî Container ncrisis-redis-1     Started                                                                                                                                                                                         0.5s 
 ‚úî Container ncrisis-postgres-1  Started                                                                                                                                                                                         0.5s 
 ‚úî Container ncrisis-app-1       Started                                                                                                                                                                                         0.6s 
6. Aguardando aplica√ß√£o (120s)...
Tentativa 1/24... SERVICE    STATE
app        running
postgres   running
redis      running
Tentativa 2/24... SERVICE    STATE
app        running
postgres   running
redis      running
Tentativa 3/24... SERVICE    STATE
app        running
postgres   running
redis      running
Tentativa 4/24... SERVICE    STATE
app        running
postgres   running
redis      running
Tentativa 5/24... SERVICE    STATE
app        running
postgres   running
redis      running
Tentativa 6/24... SERVICE    STATE
app        running
postgres   running
redis      running
Tentativa 7/24... SERVICE    STATE
app        restarting
postgres   running
redis      running
Tentativa 8/24... SERVICE    STATE
app        running
postgres   running
redis      running
Tentativa 9/24... SERVICE    STATE
app        restarting
postgres   running
redis      running
Tentativa 10/24... SERVICE    STATE
app        running
postgres   running
redis      running
Tentativa 11/24... SERVICE    STATE
app        restarting
postgres   running
redis      running
Tentativa 12/24... SERVICE    STATE
app        running
postgres   running
redis      running
Tentativa 13/24... SERVICE    STATE
app        restarting
postgres   running
redis      running
Tentativa 14/24... SERVICE    STATE
app        restarting
postgres   running
redis      running
Tentativa 15/24... SERVICE    STATE
app        restarting
postgres   running
redis      running
Tentativa 16/24... SERVICE    STATE
app        running
postgres   running
redis      running
Tentativa 17/24... SERVICE    STATE
app        restarting
postgres   running
redis      running
Tentativa 18/24... SERVICE    STATE
app        restarting
postgres   running
redis      running
Tentativa 19/24... SERVICE    STATE
app        restarting
postgres   running
redis      running
Tentativa 20/24... SERVICE    STATE
app        restarting
postgres   running
redis      running
Tentativa 21/24... SERVICE    STATE
app        restarting
postgres   running
redis      running
Tentativa 22/24... SERVICE    STATE
app        running
postgres   running
redis      running
Tentativa 23/24... SERVICE    STATE
app        restarting
postgres   running
redis      running
Tentativa 24/24... SERVICE    STATE
app        restarting
postgres   running
redis      running
7. Verificando logs em caso de erro...
Logs da aplica√ß√£o:
app-1  |     at Module.load (node:internal/modules/cjs/loader:1275:32)
app-1  |     at Function.Module._load (node:internal/modules/cjs/loader:1096:12)
app-1  |     at Module.require (node:internal/modules/cjs/loader:1298:19)
app-1  |     at require (node:internal/modules/helpers:182:18)
app-1  |     at Object.<anonymous> (/app/src/server-simple.ts:17:1)
app-1  | /app/src/config/env.ts:58
app-1  |     throw new Error(`Environment validation failed:\n${errorMessages.join('\n')}`);
app-1  |           ^
app-1  | Error: Environment validation failed:
app-1  | OPENAI_API_KEY: Required
app-1  |     at Object.<anonymous> (/app/src/config/env.ts:58:11)
app-1  |     at Module._compile (node:internal/modules/cjs/loader:1529:14)
app-1  |     at Module.m._compile (/app/node_modules/ts-node/src/index.ts:1618:23)
app-1  |     at Module._extensions..js (node:internal/modules/cjs/loader:1613:10)
app-1  |     at Object.require.extensions.<computed> [as .ts] (/app/node_modules/ts-node/src/index.ts:1621:12)
app-1  |     at Module.load (node:internal/modules/cjs/loader:1275:32)
app-1  |     at Function.Module._load (node:internal/modules/cjs/loader:1096:12)
app-1  |     at Module.require (node:internal/modules/cjs/loader:1298:19)
app-1  |     at require (node:internal/modules/helpers:182:18)
app-1  |     at Object.<anonymous> (/app/src/server-simple.ts:17:1)
8. Status final...
NAME                 IMAGE            COMMAND                  SERVICE    CREATED         STATUS                         PORTS
ncrisis-app-1        ncrisis-app      "docker-entrypoint.s‚Ä¶"   app        2 minutes ago   Restarting (1) 5 seconds ago   
ncrisis-postgres-1   postgres:15      "docker-entrypoint.s‚Ä¶"   postgres   2 minutes ago   Up 2 minutes (healthy)         0.0.0.0:5433->5432/tcp
ncrisis-redis-1      redis:7-alpine   "docker-entrypoint.s‚Ä¶"   redis      2 minutes ago   Up 2 minutes (healthy)         0.0.0.0:6380->6379/tcp
9. Testando conectividade...
Health interno: FALHOU
Health externo: OK

=== CORRE√á√ÉO ENV CONCLU√çDA ===
‚ùå Aplica√ß√£o ainda com problemas
üìä Debug: docker compose logs app
root@monster:~# 