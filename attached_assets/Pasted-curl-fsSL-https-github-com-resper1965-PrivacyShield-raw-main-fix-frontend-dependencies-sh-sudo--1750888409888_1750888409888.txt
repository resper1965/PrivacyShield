curl -fsSL https://github.com/resper1965/PrivacyShield/raw/main/fix-frontend-dependencies.sh | sudo bash
=== CORRIGINDO DEPENDÊNCIAS DO FRONTEND ===
1. Instalando todas as dependências necessárias...
npm error code ERESOLVE
npm error ERESOLVE could not resolve
npm error
npm error While resolving: frontend@0.0.0
npm error Found: react@19.1.0
npm error node_modules/react
npm error   peer react@"^19.1.0" from react-dom@19.1.0
npm error   node_modules/react-dom
npm error     peer react-dom@">=16.8" from react-router-dom@6.30.1
npm error     node_modules/react-router-dom
npm error       react-router-dom@"^6.28.0" from the root project
npm error     react-dom@"^18.2.0" from the root project
npm error   peer react@">=16.8" from react-router@6.30.1
npm error   node_modules/react-router
npm error     react-router@"6.30.1" from react-router-dom@6.30.1
npm error     node_modules/react-router-dom
npm error       react-router-dom@"^6.28.0" from the root project
npm error   4 more (react-router-dom, the root project, react-hook-form, @tanstack/react-query)
npm error
npm error Could not resolve dependency:
npm error lucide-react@"^0.263.1" from the root project
npm error
npm error Conflicting peer dependency: react@18.3.1
npm error node_modules/react
npm error   peer react@"^16.5.1 || ^17.0.0 || ^18.0.0" from lucide-react@0.263.1
npm error   node_modules/lucide-react
npm error     lucide-react@"^0.263.1" from the root project
npm error
npm error Fix the upstream dependency conflict, or retry
npm error this command with --force or --legacy-peer-deps
npm error to accept an incorrect (and potentially broken) dependency resolution.
npm error
npm error
npm error For a full report see:
npm error /root/.npm/_logs/2025-06-25T21_50_59_979Z-eresolve-report.txt
npm error A complete log of this run can be found in: /root/.npm/_logs/2025-06-25T21_50_59_979Z-debug-0.log

up to date, audited 208 packages in 2s

50 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities
2. Verificando package.json atualizado...
Dependências principais instaladas:
frontend@0.0.0 /opt/ncrisis/frontend
├─┬ @tanstack/react-query@5.81.2
│ └── react@19.1.0 deduped
├─┬ react-dom@19.1.0
│ └── react@19.1.0 deduped
├─┬ react-router-dom@6.30.1
│ ├── react-dom@19.1.0 deduped
│ ├─┬ react-router@6.30.1
│ │ └── react@19.1.0 deduped
│ └── react@19.1.0 deduped
└── react@19.1.0

3. Limpando cache e tentando build...

> frontend@0.0.0 build
> vite build

vite v6.3.5 building for production...
✓ 43 modules transformed.
✗ Build failed in 534ms
error during build:
[vite]: Rollup failed to resolve import "lucide-react" from "/opt/ncrisis/frontend/src/pages/Search.tsx".
This is most likely unintended because it can break your application at runtime.
If you do want to externalize this module explicitly add it to
`build.rollupOptions.external`
    at viteLog (file:///opt/ncrisis/frontend/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:46345:15)
    at file:///opt/ncrisis/frontend/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:46403:18
    at onwarn (file:///opt/ncrisis/frontend/node_modules/@vitejs/plugin-react/dist/index.mjs:104:9)
    at file:///opt/ncrisis/frontend/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:46401:7
    at onRollupLog (file:///opt/ncrisis/frontend/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:46393:5)
    at onLog (file:///opt/ncrisis/frontend/node_modules/vite/dist/node/chunks/dep-DBxKXgDP.js:46043:7)
    at file:///opt/ncrisis/frontend/node_modules/rollup/dist/es/shared/node-entry.js:20799:32
    at Object.logger [as onLog] (file:///opt/ncrisis/frontend/node_modules/rollup/dist/es/shared/node-entry.js:22679:9)
    at ModuleLoader.handleInvalidResolvedId (file:///opt/ncrisis/frontend/node_modules/rollup/dist/es/shared/node-entry.js:21425:26)
    at file:///opt/ncrisis/frontend/node_modules/rollup/dist/es/shared/node-entry.js:21383:26
4. Atualizando servidor para usar build corrigido...
5. Atualizando Dockerfile...
6. Reconstruindo aplicação...
[+] Running 2/3
 ✔ Container ncrisis-app       Removed                                                                                                                                                                                           0.0s 
[+] Running 2/3risis-postgres  Stopping                                                                                                                                                                                          0.1s ✔ Container ncrisis-app       Removed                                                                                                                                                                                           0.0s
 ✔ Container ncrisis-redis     Removed                                                                                                                                                                                           0.0s[+] Running 3/4risis-postgres  Stopping                                                                                                                                                                                          0.2s
 ✔ Container ncrisis-app            Removed                                                                                                                                                                                      0.0s
 ✔ Container ncrisis-redis     Removed                                                                                                                                                                                           0.0s ✔ Container ncrisis-postgres       Removed                                                                                                                                                                                      0.2s
[+] Running 4/4
 ✔ Container ncrisis-app            Removed                                                                                                                                                                                      0.0s 
 ✔ Container ncrisis-postgres       Removed                                                                                                                                                                                      0.2s 
 ✔ Container ncrisis-redis          Removed                                                                                                                                                                                      0.0s 
 ✔ Network ncrisis_ncrisis-network  Removed                                                                                                                                                                                      0.1s 
[+] Building 0.0s (0/1)                                                                                                                                                                                                              [+] Building 0.1s (1/2)                                                                                                                                                                                                              
[+] Building 0.3s (2/3)                                                                                                                                                                                                              
[+] Building 0.4s (2/3)                                                                                                                                                                                                              
[+] Building 0.6s (3/3)                                                                                                                                                                                                              
[+] Building 0.7s (6/15)                                                                                                                                                                                                             
[+] Building 0.8s (6/15)                                                                                                                                                                                                             
[+] Building 1.0s (7/15)                                                                                                                                                                                                             
[+] Building 1.1s (7/15)                                                                                                                                                                                                             
[+] Building 1.2s (7/15)                                                                                                                                                                                                             
[+] Building 1.4s (7/15)                                                                                                                                                                                                             
[+] Building 1.5s (7/15)                                                                                                                                                                                                             
[+] Building 1.7s (7/15)                                                                                                                                                                                                             
[+] Building 1.8s (7/15)                                                                                                                                                                                                             
[+] Building 1.9s (7/15)                                                                                                                                                                                                             
[+] Building 2.0s (7/15)                                                                                                                                                                                                             
[+] Building 2.0s (8/15)                                                                                                                                                                                                             
 => [internal] load local bake definitions                                                                                                                                                                                       0.0s
 => [internal] load local bake definitions                                                                                                                                                                                       0.0s
 => => reading from stdin 342B                                                                                                                                                                                                   0.0s
 => [internal] load build definition from Dockerfile                                                                                                                                                                             0.0s
 => => transferring dockerfile: 506B                                                                                                                                                                                             0.0s
 => [internal] load metadata for docker.io/library/node:20-alpine                                                                                                                                                                0.4s
[+] Building 2.2s (9/15)                                                                                                                                                                                                             
[+] Building 2.4s (9/15)                                                                                                                                                                                                             
[+] Building 2.4s (9/15)                                                                                                                                                                                                             
[+] Building 2.6s (9/15)                                                                                                                                                                                                             
[+] Building 2.7s (9/15)                                                                                                                                                                                                             
[+] Building 2.9s (9/15)                                                                                                                                                                                                             
[+] Building 3.0s (9/15)                                                                                                                                                                                                             
[+] Building 3.2s (9/15)                                                                                                                                                                                                             
[+] Building 3.3s (9/15)                                                                                                                                                                                                             
[+] Building 3.5s (9/15)                                                                                                                                                                                                             
[+] Building 3.6s (9/15)                                                                                                                                                                                                             
[+] Building 3.8s (9/15)                                                                                                                                                                                                             
[+] Building 3.9s (9/15)                                                                                                                                                                                                             
[+] Building 4.1s (9/15)                                                                                                                                                                                                             [+] Building 4.2s (9/15)                                                                                                                                                                                                             
[+] Building 4.4s (9/15)                                                                                                                                                                                                             [+] Building 4.5s (9/15)                                                                                                                                                                                                             
[+] Building 4.7s (9/15)                                                                                                                                                                                                             [+] Building 4.8s (9/15)                                                                                                                                                                                                             
[+] Building 5.0s (9/15)                                                                                                                                                                                                             
[+] Building 5.1s (9/15)                                                                                                                                                                                                             
[+] Building 5.3s (9/15)                                                                                                                                                                                                             
[+] Building 5.4s (9/15)                                                                                                                                                                                                             
[+] Building 5.6s (9/15)                                                                                                                                                                                                             
[+] Building 5.7s (9/15)                                                                                                                                                                                                             
[+] Building 5.9s (9/15)                                                                                                                                                                                                             
[+] Building 6.0s (9/15)                                                                                                                                                                                                             
[+] Building 6.2s (9/15)                                                                                                                                                                                                             
[+] Building 6.3s (9/15)                                                                                                                                                                                                             
[+] Building 6.5s (9/15)                                                                                                                                                                                                             
[+] Building 6.6s (9/15)                                                                                                                                                                                                             
[+] Building 6.8s (9/15)                                                                                                                                                                                                             
[+] Building 6.9s (9/15)                                                                                                                                                                                                             
[+] Building 7.1s (9/15)                                                                                                                                                                                                             
[+] Building 7.2s (9/15)                                                                                                                                                                                                             
[+] Building 7.4s (9/15)                                                                                                                                                                                                             
[+] Building 7.5s (9/15)                                                                                                                                                                                                             
[+] Building 7.7s (9/15)                                                                                                                                                                                                             
[+] Building 7.8s (9/15)                                                                                                                                                                                                             
[+] Building 8.0s (9/15)                                                                                                                                                                                                             
[+] Building 8.0s (9/15)                                                                                                                                                                                                             
[+] Building 8.2s (9/15)                                                                                                                                                                                                             
[+] Building 8.3s (9/15)                                                                                                                                                                                                             
[+] Building 8.4s (9/15)                                                                                                                                                                                                             
[+] Building 8.6s (9/15)                                                                                                                                                                                                             
[+] Building 8.7s (9/15)                                                                                                                                                                                                             
[+] Building 8.9s (9/15)                                                                                                                                                                                                             
[+] Building 9.0s (9/15)                                                                                                                                                                                                             
[+] Building 9.2s (9/15)                                                                                                                                                                                                             
[+] Building 9.3s (9/15)                                                                                                                                                                                                             
[+] Building 9.5s (9/15)                                                                                                                                                                                                             
[+] Building 9.6s (9/15)                                                                                                                                                                                                             
[+] Building 9.8s (9/15)                                                                                                                                                                                                             
[+] Building 9.9s (9/15)                                                                                                                                                                                                             
[+] Building 10.1s (9/15)                                                                                                                                                                                                            
[+] Building 10.2s (9/15)                                                                                                                                                                                                            
[+] Building 10.4s (9/15)                                                                                                                                                                                                            
[+] Building 10.5s (9/15)                                                                                                                                                                                                            
[+] Building 10.7s (9/15)                                                                                                                                                                                                            
[+] Building 10.8s (9/15)                                                                                                                                                                                                            
[+] Building 11.0s (9/15)                                                                                                                                                                                                            
[+] Building 11.1s (9/15)                                                                                                                                                                                                            
[+] Building 11.3s (9/15)                                                                                                                                                                                                            
[+] Building 11.4s (9/15)                                                                                                                                                                                                            
[+] Building 11.6s (9/15)                                                                                                                                                                                                            
[+] Building 11.7s (9/15)                                                                                                                                                                                                            
[+] Building 11.9s (9/15)                                                                                                                                                                                                            
[+] Building 12.0s (9/15)                                                                                                                                                                                                            
[+] Building 12.2s (9/15)                                                                                                                                                                                                            
[+] Building 12.3s (9/15)                                                                                                                                                                                                            
[+] Building 12.5s (9/15)                                                                                                                                                                                                            
[+] Building 12.6s (9/15)                                                                                                                                                                                                            
[+] Building 12.8s (9/15)                                                                                                                                                                                                            
[+] Building 12.9s (9/15)                                                                                                                                                                                                            
[+] Building 13.1s (9/15)                                                                                                                                                                                                            
[+] Building 13.2s (9/15)                                                                                                                                                                                                            
[+] Building 13.4s (9/15)                                                                                                                                                                                                            
[+] Building 13.5s (9/15)                                                                                                                                                                                                            
[+] Building 13.7s (9/15)                                                                                                                                                                                                            
[+] Building 13.8s (9/15)                                                                                                                                                                                                            
[+] Building 14.0s (9/15)                                                                                                                                                                                                            
[+] Building 14.1s (9/15)                                                                                                                                                                                                            
[+] Building 14.3s (9/15)                                                                                                                                                                                                            
[+] Building 14.4s (9/15)                                                                                                                                                                                                            
[+] Building 14.6s (9/15)                                                                                                                                                                                                            
[+] Building 14.7s (9/15)                                                                                                                                                                                                            
[+] Building 14.9s (9/15)                                                                                                                                                                                                            
[+] Building 15.0s (9/15)                                                                                                                                                                                                            
[+] Building 15.2s (9/15)                                                                                                                                                                                                            
[+] Building 15.3s (9/15)                                                                                                                                                                                                            
[+] Building 15.5s (9/15)                                                                                                                                                                                                            
[+] Building 15.6s (9/15)                                                                                                                                                                                                            
[+] Building 15.8s (9/15)                                                                                                                                                                                                            
[+] Building 15.9s (9/15)                                                                                                                                                                                                            
[+] Building 16.1s (9/15)                                                                                                                                                                                                            
[+] Building 16.2s (9/15)                                                                                                                                                                                                            
[+] Building 16.4s (9/15)                                                                                                                                                                                                            
[+] Building 16.5s (9/15)                                                                                                                                                                                                            
[+] Building 16.7s (9/15)                                                                                                                                                                                                            
[+] Building 16.8s (9/15)                                                                                                                                                                                                            
[+] Building 17.0s (9/15)                                                                                                                                                                                                            
[+] Building 17.1s (9/15)                                                                                                                                                                                                            
[+] Building 17.3s (9/15)                                                                                                                                                                                                            
[+] Building 17.4s (9/15)                                                                                                                                                                                                            
[+] Building 17.6s (9/15)                                                                                                                                                                                                            
[+] Building 17.7s (9/15)                                                                                                                                                                                                            
[+] Building 17.9s (9/15)                                                                                                                                                                                                            
[+] Building 18.0s (9/15)                                                                                                                                                                                                            
[+] Building 18.2s (9/15)                                                                                                                                                                                                            
[+] Building 18.3s (9/15)                                                                                                                                                                                                            
[+] Building 18.5s (9/15)                                                                                                                                                                                                            
[+] Building 18.6s (9/15)                                                                                                                                                                                                            
[+] Building 18.8s (9/15)                                                                                                                                                                                                            
[+] Building 18.9s (9/15)                                                                                                                                                                                                            
[+] Building 19.1s (9/15)                                                                                                                                                                                                            
[+] Building 19.2s (9/15)                                                                                                                                                                                                            
[+] Building 19.4s (9/15)                                                                                                                                                                                                            
[+] Building 19.5s (9/15)                                                                                                                                                                                                            
[+] Building 19.7s (9/15)                                                                                                                                                                                                            
[+] Building 19.8s (9/15)                                                                                                                                                                                                            
[+] Building 20.0s (9/15)                                                                                                                                                                                                            
[+] Building 20.1s (9/15)                                                                                                                                                                                                            
[+] Building 20.3s (9/15)                                                                                                                                                                                                            
[+] Building 20.4s (9/15)                                                                                                                                                                                                            
[+] Building 20.6s (9/15)                                                                                                                                                                                                            
[+] Building 20.7s (9/15)                                                                                                                                                                                                            
[+] Building 20.9s (9/15)                                                                                                                                                                                                            
[+] Building 21.0s (9/15)                                                                                                                                                                                                            
[+] Building 21.2s (9/15)                                                                                                                                                                                                            
[+] Building 21.3s (9/15)                                                                                                                                                                                                            
[+] Building 21.5s (9/15)                                                                                                                                                                                                            
[+] Building 21.6s (9/15)                                                                                                                                                                                                            
[+] Building 21.8s (9/15)                                                                                                                                                                                                            
[+] Building 21.9s (9/15)                                                                                                                                                                                                            
[+] Building 22.1s (9/15)                                                                                                                                                                                                            
[+] Building 22.2s (9/15)                                                                                                                                                                                                            
[+] Building 22.4s (9/15)                                                                                                                                                                                                            
[+] Building 22.5s (9/15)                                                                                                                                                                                                            
[+] Building 22.7s (9/15)                                                                                                                                                                                                            
[+] Building 22.8s (9/15)                                                                                                                                                                                                            
[+] Building 23.0s (9/15)                                                                                                                                                                                                            